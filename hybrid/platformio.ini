; ═══════════════════════════════════════════════════════════════════
; AETHER Pulse Firmware - sACN/E1.31 WiFi DMX Node
; ═══════════════════════════════════════════════════════════════════
;
; SINGLE TRANSPORT: sACN/E1.31 over WiFi (industry standard)
;
; Architecture:
;   Pi (aether-core + OLA)
;     └── sACN multicast (239.255.0.{universe}) → ESP32 nodes
;
; Features:
;   - sACN/E1.31 multicast DMX reception
;   - UDP JSON for configuration commands
;   - OLED status display
;   - RS485/DMX output @ 40Hz
;   - OTA firmware updates
;   - NVS configuration storage
;
; Build:
;   pio run                    # Build firmware
;   pio run -t upload          # Flash to ESP32
;   pio device monitor         # Serial monitor
;
; ═══════════════════════════════════════════════════════════════════

[platformio]
default_envs = pulse
src_dir = src
include_dir = include

; ═══════════════════════════════════════════════════════════════════
; MAIN CONFIGURATION
; ═══════════════════════════════════════════════════════════════════
[env:pulse]
platform = espressif32@6.4.0
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 921600

lib_deps =
    someweisguy/esp_dmx@^4.1.0
    bblanchon/ArduinoJson@^7.0.0
    adafruit/Adafruit SSD1306@^2.5.9
    adafruit/Adafruit GFX Library@^1.11.9
    forkineye/ESPAsyncE131@^1.0.3

build_flags =
    -DCORE_DEBUG_LEVEL=0
    -DAETHER_FIRMWARE_VERSION_MAJOR=2
    -DAETHER_FIRMWARE_VERSION_MINOR=2
    -DAETHER_FIRMWARE_VERSION_PATCH=0
    -DAETHER_FIRMWARE_FAMILY=\"pulse-sacn\"
    -DAETHER_OTA_CHANNEL=\"stable\"
    -DENABLE_SACN=1

; ═══════════════════════════════════════════════════════════════════
; DEBUG BUILD
; ═══════════════════════════════════════════════════════════════════
[env:pulse_debug]
extends = env:pulse
build_flags =
    ${env:pulse.build_flags}
    -DCORE_DEBUG_LEVEL=3
    -DDEBUG_VERBOSE=1
